<div class="relative flex h-screen items-center justify-center w-full bg-white">
  <div class="w-full max-w-sm p-6 flex flex-col justify-between h-full">
    <form
      [formGroup]="newPasswordForm"
      (ngSubmit)="onSubmit()"
      class="flex flex-col justify-between h-full"
    >
      <div class="flex flex-col items-center justify-center grow">
        <img src="assets/logo2.png" alt="Logo" class="mb-4" />
        <p class="text-center text-[#19AA79] text-sm font-medium">Crie a sua nova senha</p>
        <p class="text-center text-gray-500 text-xs mt-2">
          A senha deve ter no mínimo 8 caracteres
        </p>
      </div>

      <div class="flex flex-col">
        <div class="relative w-full">
          <input
            id="password"
            [type]="mostrarSenha ? 'text' : 'password'"
            formControlName="password"
            placeholder="Nova senha (mínimo 8 caracteres)"
            class="placeholder-[#9E9E9E] mb-3 block w-full h-14 rounded-lg border border-[#AEC8D4] px-4 py-2 focus:outline-0 focus:border-[#19AA79]"
            [class.border-red-500]="
              newPasswordForm.get('password')?.invalid && newPasswordForm.get('password')?.touched
            "
          />

          <button
            type="button"
            (click)="toggleSenha()"
            class="absolute inset-y-0 mb-3 right-0 px-3 flex items-center"
            aria-label="Alternar visibilidade da senha"
          >
            <img
              [src]="mostrarSenha ? 'assets/senhavisivel.png' : 'assets/senhanaovisivel.png'"
              alt="Alternar senha"
            />
          </button>
        </div>

        @if (newPasswordForm.get('password')?.invalid && newPasswordForm.get('password')?.touched) {
          <div class="text-red-500 text-xs mb-2 -mt-2">A senha deve ter no mínimo 8 caracteres</div>
        }

        <div class="relative w-full">
          <input
            id="confirmPassword"
            [type]="mostrarConfirmarSenha ? 'text' : 'password'"
            formControlName="confirmPassword"
            placeholder="Confirme a nova senha"
            class="placeholder-[#9E9E9E] mb-3 block w-full h-14 rounded-lg border border-[#AEC8D4] px-4 py-2 focus:outline-0 focus:border-[#19AA79]"
            [class.border-red-500]="
              newPasswordForm.get('confirmPassword')?.touched &&
              newPasswordForm.get('confirmPassword')?.value !==
                newPasswordForm.get('password')?.value
            "
          />

          <button
            type="button"
            (click)="toggleConfirmarSenha()"
            class="absolute inset-y-0 mb-3 right-0 px-3 flex items-center"
            aria-label="Alternar visibilidade da senha"
          >
            <img
              [src]="
                mostrarConfirmarSenha ? 'assets/senhavisivel.png' : 'assets/senhanaovisivel.png'
              "
              alt="Alternar senha"
            />
          </button>
        </div>

        @if (
          newPasswordForm.get('confirmPassword')?.touched &&
          newPasswordForm.get('confirmPassword')?.value !== newPasswordForm.get('password')?.value
        ) {
          <div class="text-red-500 text-xs mb-2 -mt-2">As senhas não coincidem</div>
        }

        @if (errorMessage) {
          <div class="mb-3 p-3 bg-red-50 border border-red-200 rounded-lg">
            <p class="text-red-600 text-sm">
              {{ errorMessage }}
            </p>
          </div>
        }

        <button
          type="submit"
          [disabled]="newPasswordForm.invalid || loading"
          class="w-full h-14 rounded-4xl bg-[#19AA79] py-2 text-white font-semibold hover:bg-[#198879] transition disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{ loading ? 'Atualizando...' : 'Confirmar' }}
        </button>
      </div>
    </form>
  </div>
</div>
